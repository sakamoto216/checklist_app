# BUG-2025-011: Android実機動作不具合

## 📋 基本情報
- **チケット番号**: BUG-2025-011
- **タイトル**: Android実機動作不具合
- **作成日**: 2025-08-05
- **優先度**: High
- **状態**: todo
- **担当者**: Claude Code
- **推定工数**: 2時間

## 🐛 不具合概要
Android実機でアプリを動作確認したところ、以下の機能が正常に動作しない：
1. 設定画面が開かない（設定ボタンを押してもモーダルが表示されない）
2. 全件チェックボタンが機能しない
3. 全件チェック解除ボタンが機能しない

## 🔍 再現手順
1. Android実機でアプリを起動
2. フッターの設定ボタン（歯車アイコン）をタップ → 設定画面が開かない
3. フッターの全件チェックボタンをタップ → 何も起こらない
4. フッターの全件チェック解除ボタンをタップ → 何も起こらない

## 🎯 期待される動作
1. 設定ボタンをタップすると設定モーダルが表示される
2. 全件チェックボタンをタップすると確認ダイアログが表示される
3. 全件チェック解除ボタンをタップすると確認ダイアログが表示される

## 📱 環境情報
- **プラットフォーム**: Android実機
- **フレームワーク**: React Native (Expo)
- **症状**: iOS実機やシミュレータでは正常動作（推測）

## 🔧 推定原因
1. **Android特有のタッチイベント処理問題**
   - TouchableOpacityのAndroidでの動作不具合
   - activeOpacityやdisabled状態の処理問題
   
2. **モーダル表示の問題**
   - SettingsModalのAndroid対応不備
   - z-indexやoverlay設定の問題
   
3. **Alert表示の問題**
   - React NativeのAlert.alertのAndroid対応問題
   - ダイアログ表示権限の問題

4. **状態管理の問題**
   - hasTasksToCheckやenableBulkActionsの状態取得エラー
   - プロップス渡しの問題

## 📂 影響範囲
- `src/components/Footer.js` - フッターボタンのタッチイベント
- `src/components/SettingsModal.js` - 設定モーダルの表示
- `App.js` - 状態管理とプロップス渡し
- `src/hooks/useTasks.js` - 全件チェック機能

## 🔍 調査項目
- [ ] Footer.jsのTouchableOpacityの動作確認
- [ ] SettingsModalの表示ロジック確認
- [ ] App.jsの状態管理とプロップス確認
- [ ] Android特有のタッチイベント設定確認
- [ ] コンソールエラーやデバッグログの確認

## 💡 修正アプローチ
1. **デバッグログ追加**: ボタンタップ時のログ出力で動作確認
2. **TouchableOpacity置換**: Android対応の良いTouchableHighlightやPressableに変更
3. **モーダル修正**: Android対応のモーダル実装に変更
4. **Alert修正**: カスタムダイアログまたはAndroid対応Alert実装

## ⚠️ 注意事項
- iOS実機での動作確認も必要
- 他のフッター機能（追加・削除モード）への影響確認
- パフォーマンスへの影響を最小限に抑制

## 🔗 関連
- FEAT-2025-005-設定画面機能（進行中チケット）
- Footer.js の実装変更
- Android特有の動作確認

## Claude Code指示
1. Footer.jsのタッチイベント動作をデバッグログで確認
2. Android対応のタッチ可能コンポーネントに変更
3. SettingsModalのAndroid対応確認・修正
4. Alert表示のAndroid対応確認・修正
5. 実機での動作確認とテスト
6. iOS実機での回帰テスト

## 作業ログ
### 2025-08-05
- バグ報告受領
- チケット作成完了
- 修正方針策定完了- 2025-08-05 15:40 - 作業開始
- 2025-08-05 15:44 - 作業完了（レビュー待ち）
- 2025-08-05 16:00 - review → done へ移動
